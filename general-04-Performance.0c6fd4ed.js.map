{"version":3,"sources":["tools/__generated__/general-04-Performance.tsx"],"names":[],"mappings":";AAoJC,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,aAAA,EAnJD,IAAA,EAAA,EAAA,QAAA,UACA,EAAA,QAAA,4BAkJC,SAAA,EAAA,GAAA,GAAA,mBAAA,QAAA,OAAA,KAAA,IAAA,EAAA,IAAA,QAAA,EAAA,IAAA,QAAA,OAAA,EAAA,SAAA,GAAA,OAAA,EAAA,EAAA,IAAA,GAAA,SAAA,EAAA,EAAA,GAAA,IAAA,GAAA,GAAA,EAAA,WAAA,OAAA,EAAA,GAAA,OAAA,GAAA,iBAAA,GAAA,mBAAA,EAAA,MAAA,CAAA,QAAA,GAAA,IAAA,EAAA,EAAA,GAAA,GAAA,GAAA,EAAA,IAAA,GAAA,OAAA,EAAA,IAAA,GAAA,IAAA,EAAA,GAAA,EAAA,OAAA,gBAAA,OAAA,yBAAA,IAAA,IAAA,KAAA,EAAA,GAAA,YAAA,GAAA,OAAA,UAAA,eAAA,KAAA,EAAA,GAAA,CAAA,IAAA,EAAA,EAAA,OAAA,yBAAA,EAAA,GAAA,KAAA,IAAA,EAAA,KAAA,EAAA,KAAA,OAAA,eAAA,EAAA,EAAA,GAAA,EAAA,GAAA,EAAA,GAAA,OAAA,EAAA,QAAA,EAAA,GAAA,EAAA,IAAA,EAAA,GAAA,EA9IK,IAAM,EAAO,8FACP,EAAO,g+XAqIJ,EAAA,WACb,OAAA,EAAA,cAAC,EAAD,YAAY,KAER,EAAA,cAAC,EAAD,YAAY,CAAC,KAAM,CAAS,MAAA,gBAC1B,EAAA,cAAC,EAAD,SAAS,CAAC,QAAS,EAAM,KAAM,EAAM,UAAW,sBAIvD,QAAA,QAAA","file":"general-04-Performance.0c6fd4ed.js","sourceRoot":"..\\..\\node_modules\\piral-docs-tools\\src","sourcesContent":["// {\"title\":\"Performance\",\"link\":\"/general/04-Performance\",\"source\":\"E:\\\\Code\\\\AngleSharp\\\\AngleSharp.Website\\\\docs\\\\general\\\\04-Performance.md\"}\nimport * as React from 'react';\nimport { ContentPage } from '../../scripts/components';\n\n      import { PageContent, Markdown } from '../../scripts/components';\n\n      const link = \"https://github.com/AngleSharp/anglesharp.github.io/tree/main/docs/general/04-Performance.md\";\n      const html = `\n<h1 id=\"performance-evaluations\">Performance Evaluations</h1>\n<h2 id=\"general-considerations\">General Considerations</h2>\n<p>The library is not small (its not huge either), which makes preloading or &quot;warming-up&quot; (or using NGen) a candidate for productive usage. The first runs will always be slower than the following. This is a property of C# / the MSIL (or the JIT process in general), which has nothing to do with AngleSharp.</p>\n<p>AngleSharp has been written with performance in mind. Actually the priority is:</p>\n<ol>\n<li>Standard conformance</li>\n<li>Performance</li>\n<li>Helpers / extensions</li>\n<li>Tooling</li>\n</ol>\n<p>Even though there are still optimizations possible (since everything had to be working first, i.e. standard conformance has been considered), the performance is promising. Parsers in established web browsers (usually written in C/C++) will still have a faster execution time, but for a completely managed process the whole parsing / DOM creation procedure is very fast.</p>\n<p>In the following AngleSharp will be compared to other popular libraries, which are either very popular (like the HtmlAgilityPack) or ambitious (like CsQuery).</p>\n<h2 id=\"comparison-with-the-html-agility-pack\">Comparison with the Html Agility Pack</h2>\n<p>The Html Agility Pack (HAP) is a good comparison target, since it is most used and established since a long time. Obviously AngleSharp is a great replacement for HAP due to the following reasons:</p>\n<ul>\n<li>Standardized HTML5 parsing model</li>\n<li>Much better error correction / handling</li>\n<li>Also parses SVG / MathML elements correctly</li>\n<li>Can handle CSS (selectors, rules, ...)</li>\n<li>Better performance</li>\n</ul>\n<p>While the first points are all quite obvious and clear (that is why AngleSharp has been developed in the first place), the last point is controversial.</p>\n<p>To proof this point a small test program has been written. The following code snippet represents the kernel of this program.</p>\n<pre><code class=\"hljs language-c#\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">async</span> Task&lt;Int64&gt; <span class=\"hljs-title\">Test</span>(<span class=\"hljs-params\">Func&lt;String, Int64&gt; test, String source</span>)</span>\n{\n    <span class=\"hljs-keyword\">var</span> min = Int64.MaxValue;\n\n    <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-built_in\">int</span> i = <span class=\"hljs-number\">0</span>; i &lt; <span class=\"hljs-number\">20</span>; i++)\n        min = Math.Min(min, <span class=\"hljs-keyword\">await</span> Task.Run(() =&gt; test(source)));\n\n    <span class=\"hljs-keyword\">return</span> min;\n}\n\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">static</span> Int64 <span class=\"hljs-title\">TestAngle</span>(<span class=\"hljs-params\">String source</span>)</span>\n{\n    <span class=\"hljs-keyword\">var</span> sw = Stopwatch.StartNew();\n    <span class=\"hljs-keyword\">var</span> parser = <span class=\"hljs-keyword\">new</span> HtmlParser(source);\n    parser.Parse();\n    sw.Stop();\n    <span class=\"hljs-keyword\">return</span> sw.ElapsedMilliseconds;\n}\n\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">static</span> Int64 <span class=\"hljs-title\">TestAgility</span>(<span class=\"hljs-params\">String source</span>)</span>\n{\n    <span class=\"hljs-keyword\">var</span> sw = Stopwatch.StartNew();\n    <span class=\"hljs-keyword\">var</span> document = <span class=\"hljs-keyword\">new</span> HtmlDocument();\n    document.LoadHtml(source);\n    sw.Stop();\n    <span class=\"hljs-keyword\">return</span> sw.ElapsedMilliseconds;\n}\n</code></pre>\n<p>This program then calls the <code>Test</code> method with the source code of several webpages. All of them are quite important / used very often and some of them are quite big. The biggest is definitely the official W3C syntax specification.</p>\n<p>The following image shows the outcome of running this test. (caution: Outdated versions of <em>all</em> included parser; just for illustration)</p>\n<p><img src=\"http://www.florian-rappl.de/img/0/comparison_as_hap_csq.png\" alt=\"Comparison AngleSharp HtmlAgilityPack\"></p>\n<p>Note that we took the lowest wall-time in 20 trials. The outcome details change slightly if we take the average - since AngleSharp has more code-paths and therefore requires a greater mix in warm-up runs than the HAP, however, the overall outcome is still the same with AngleSharp being faster.</p>\n<p>The only entry where HAP excels is &quot;GoogleNews&quot;. This is, however, a false impression. The true speedup comes from omitting the (large) inline style-sheet. Here AngleSharp has to parse CSS as well, which of course takes some additional time. The official benchmark program below excludes such edge cases by disabling CSS parsing (therefore only HTML parsing is benchmarked as intended).</p>\n<h2 id=\"comparison-with-csquery-%2F-validator.nu-html-parser\">Comparison with CsQuery / validator.nu HTML Parser</h2>\n<p>The CsQuery project aims to be a C# port of jQuery. To parse HTML a port of the validator.nu HTML5 engine has been selected. The validity of the resulting DOM should therefore on roughly the same level as AngleSharp, however, missing important elements such as <code>template</code> or <code>main</code>. The above image also includes the performance measurement for the HTML parser.</p>\n<p>The parsing performance is mixed compared to AngleSharp. AngleSharp has been measured in an early stage (v0.8.6), i.e. it is likely that the performance of AngleSharp will increase even further. While the CsQuery project is ambitious and contains some interesting ideas and features, AngleSharp tries to solve the problem from the other side - follow the standards first and add nice features on top afterwards. The past has shown that implementing fancy features or a non-standard, but better, API first, will lead to problems later on.</p>\n<p>In general there are areas where AngleSharp is performing better, and other pages where the validator.nu parser is faster. In most cases the winner does not really matter (cases such as 2ms vs 3ms).</p>\n<h2 id=\"comparison-with-other-solutions\">Comparison with Other Solutions</h2>\n<p>One could also make comparisons to other projects. In the official <strong>Performance</strong> project (contained in the Visual Studio solution) you will find the <em>Majestic</em> (Majestic 13) parser. This one is nearly always faster than any other solution. Is it the right choice for your project? Probably not. The reason is simple: Majestic does not build a DOM, it also does not care about special tags, meanings and the HTML error correction. Basically Majestic is AngleSharp reduced to its tokenizer, with the tokenizer being a little bit simpler.</p>\n<p>This is also the reason for excluding Majestic from the performance comparison. However, you are (for your own pleasure) of course allowed to include Majestic again. The code is already checked-in.</p>\n<h2 id=\"current-performance\">Current Performance</h2>\n<p>Currently the performance of AngleSharp is quite satisfying. On an Intel Core i5 4570 with 3.2 GHz system with 16 GB of RAM we could gather the following statistics (from the official benchmark program).</p>\n<pre><code class=\"hljs\"><span class=\"hljs-section\">                            RUNNING TESTS (v0.9.1)\n============================================================================</span>\n<span class=\"hljs-section\">                       AngleSharp           CsQuery        HTMLAgilityPack\n----------------------------------------------------------------------------</span>\namazon                     1ms                7ms                0ms\nblogspot                   1ms                2ms                5ms\nsmashing                   1ms                1ms                1ms\nyoutube                   11ms               15ms               13ms\nweibo                      0ms                0ms                0ms\nyahoo                      8ms               35ms               22ms\ngoogle                     2ms                2ms                8ms\nlinkedin                   3ms                2ms                3ms\npinterest                  1ms                1ms                5ms\nnews.google               28ms               34ms               41ms\nbaidu                      1ms                1ms                6ms\ncodeproject                4ms                4ms                4ms\nebay                       8ms                8ms                8ms\nmsn                       18ms               18ms               13ms\nnbc                        5ms                4ms                8ms\nqq                        17ms              1060ms              52ms\nflorian-rappl              0ms                1ms                0ms\nstackoverflow             16ms               15ms               12ms\nhtml5rocks                 0ms                0ms                0ms\nlive                       0ms                0ms                0ms\ntaobao                    14ms               15ms                7ms\nhuffingtonpost            11ms                9ms               10ms\nwordpress                  1ms                0ms                0ms\nmyspace                   20ms               29ms               21ms\nflickr                     3ms                5ms               13ms\ngodaddy                    6ms                5ms                7ms\nreddit                     6ms                9ms                6ms\nnytimes                   14ms               13ms               13ms\npeacekeeper.futu...        0ms                0ms                1ms\npcmag                      9ms               11ms               16ms\nsitepoint                  1ms                2ms                3ms\nhtml5test                  0ms                1ms                2ms\nspiegel                   15ms               12ms               13ms\ntmall                      2ms                3ms                2ms\nsohu                      20ms               46ms               39ms\nvk                         2ms                0ms                1ms\nwordpress                  2ms                0ms                0ms\nbing                       1ms                1ms                4ms\ntumblr                     2ms                3ms                3ms\nask                        0ms                0ms                1ms\nmail.ru                    6ms               11ms               15ms\nimdb                       6ms                4ms                6ms\nkickass.to                 0ms                0ms                0ms\n360.cn                     4ms                4ms                8ms\n163                       32ms               45ms               56ms\nneobux                     1ms                0ms                0ms\naliexpress                10ms                9ms                9ms\nnetflix                    4ms                3ms                7ms\nw3                        912ms              579ms             1064ms\n<span class=\"hljs-section\">en.wikipedia              37ms               26ms               33ms\n----------------------------------------------------------------------------</span>\n<span class=\"hljs-section\">Total                    1292ms             2080ms             1583ms\n----------------------------------------------------------------------------</span>\n<span class=\"hljs-section\">Fastest                    20                 19                 11\n----------------------------------------------------------------------------</span>\n<span class=\"hljs-section\">Slowest                    13                 12                 25\n----------------------------------------------------------------------------</span>\n</code></pre>\n<p>This run has been made with the default setting of 5 repeats and 1 run. Fluctuations might be high and a representative examination has to consider lots of repeats and runs.</p>\n<p>At the moment the performance of AngleSharp seems to be better than HAP and about equal to CsQuery. There are edge cases (as soon above), which are under investigation. They will certainly be improved before relasing v1.0.0.</p>\n`;\n    \n\nexport default () => (\n  <ContentPage>\n    \n      <PageContent meta={{\"title\":\"Performance\"}}>\n        <Markdown content={html} link={link} editLabel={\"Edit on GitHub\"} />\n      </PageContent>\n    \n  </ContentPage>\n);"]}